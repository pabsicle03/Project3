<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sharetea Start Page</title>
  <link rel="stylesheet" href="startstyle.css">
  <style>
    .modal {
      display: none;
      position: fixed;
      z-index: 10;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }

    .modal-content {
      background-color: white;
      margin: 10% auto;
      padding: 20px;
      border-radius: 12px;
      width: 320px;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    .modal-content h2 {
      margin-bottom: 15px;
    }

    .modal-content input {
      width: 90%;
      padding: 8px;
      margin: 6px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    .modal-content button {
      margin-top: 10px;
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      background-color: #c0392b;
      color: white;
      cursor: pointer;
    }

    .modal-content button:hover {
      background-color: #a93226;
    }

    .close-btn {
      float: right;
      font-size: 18px;
      cursor: pointer;
      color: #888;
    }

    .close-btn:hover {
      color: black;
    }

    #loginError {
      color: red;
      font-size: 0.9em;
      margin-top: 8px;
      display: none;
    }

    /* Optional separator */
    .separator {
      margin: 15px 0;
      border-top: 1px solid #ccc;
      position: relative;
    }

    .separator span {
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      padding: 0 8px;
      font-size: 0.9em;
      color: #666;
    }

    /* Center Google login */
    .google-login-container {
      text-align: center;
      margin-top: 15px; /* spacing from separator */
    }
  </style>

  <!-- Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <div class="outer-container">
    <div class="inner-box">
      <div class="logo-area">
        <h1>Share<span class="red-text">tea</span></h1>
      </div>
      <div class="button-area">
        <a href="#" class="btn btn-login" id="loginBtn">Log In</a>
        <a href="#" class="btn btn-guest" id="guestBtn">Continue as Guest</a>
      </div>
    </div>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" id="closeModal">&times;</span>
      <h2>Log In</h2>

      <!-- Manual Login -->
      <input type="text" id="userId" placeholder="User ID" />
      <input type="password" id="password" placeholder="Password" />
      <button id="submitLogin">Submit</button>
      <div id="loginError">Please enter both ID and password.</div>

      <!-- Separator -->
      <div class="separator"><span>OR</span></div>

      <!-- Google Sign-In Button -->
      <div class="google-login-container">
        <div id="googleLoginButton"></div>
      </div>
    </div>
  </div>

  <script>
    const loginBtn = document.getElementById('loginBtn');
    const guestBtn = document.getElementById('guestBtn');
    const modal = document.getElementById('loginModal');
    const closeModal = document.getElementById('closeModal');
    const submitLogin = document.getElementById('submitLogin');
    const loginError = document.getElementById('loginError');

    // Guest login
    guestBtn.addEventListener('click', (e) => {
      e.preventDefault();
      localStorage.setItem('userId', 0);
      window.location.href = 'customerallmenu.html';
    });

    // Show modal
    loginBtn.addEventListener('click', (e) => {
      e.preventDefault();
      modal.style.display = 'block';
      loginError.style.display = 'none';
    });

    // Close modal
    closeModal.addEventListener('click', () => modal.style.display = 'none');
    window.addEventListener('click', (e) => { if (e.target === modal) modal.style.display = 'none'; });

    // Manual login
    submitLogin.addEventListener('click', () => {
      const id = document.getElementById('userId').value.trim();
      const password = document.getElementById('password').value;

      if (!id || !password) {
        loginError.textContent = "Please enter both ID and password.";
        loginError.style.display = 'block';
        return;
      }

      localStorage.setItem('userId', id);
      modal.style.display = 'none';
      window.location.href = 'customerallmenu.html';
    });

    // Google Sign-In
    function handleCredentialResponse(response) {
      const token = response.credential;
      localStorage.setItem('googleToken', token);
      modal.style.display = 'none';
      window.location.href = 'customerallmenu.html';
    }

    window.onload = function () {
      google.accounts.id.initialize({
        client_id: '834334576099-koeo9claok53pvmlqm6q2adfvklme2co.apps.googleusercontent.com',
        callback: handleCredentialResponse
      });

      google.accounts.id.renderButton(
        document.getElementById('googleLoginButton'),
        { theme: 'outline', size: 'large', width: '250', text: 'signin_with' }
      );
    }
  </script>
</body>
</html>
